{% extends "layouts/page.njk" %}

{% block pageTitle %}
  Add Standard Set - Defra AI Code Review
{% endblock %}

{% block content %}
  <div class="govuk-width-container">
    <main class="govuk-main-wrapper" id="main-content" role="main">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <h1 class="govuk-heading-xl">{{ pageTitle }}</h1>

          {% if error %}
            <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" data-module="govuk-error-summary">
              <h2 class="govuk-error-summary__title" id="error-summary-title">
                There is a problem
              </h2>
              <div class="govuk-error-summary__body">
                <p>{{ error }}</p>
              </div>
            </div>
          {% endif %}

          <form method="POST" action="/standards/standard-sets">
            <div class="govuk-form-group {% if errors.name %}govuk-form-group--error{% endif %}">
              <label class="govuk-label" for="name">
                Name
              </label>
              {% if errors.name %}
                <p id="name-error" class="govuk-error-message">
                  <span class="govuk-visually-hidden">Error:</span> {{ errors.name.message }}
                </p>
              {% endif %}
              <input class="govuk-input {% if errors.name %}govuk-input--error{% endif %}" 
                     id="name" 
                     name="name" 
                     type="text" 
                     value="{{ values.name }}" 
                     required>
            </div>

            <div class="govuk-form-group {% if errors.repository_url %}govuk-form-group--error{% endif %}">
              <label class="govuk-label" for="repository_url">
                Repository URL
              </label>
              {% if errors.repository_url %}
                <p id="repository_url-error" class="govuk-error-message">
                  <span class="govuk-visually-hidden">Error:</span> {{ errors.repository_url.message }}
                </p>
              {% endif %}
              <input class="govuk-input {% if errors.repository_url %}govuk-input--error{% endif %}" 
                     id="repository_url" 
                     name="repository_url" 
                     type="url" 
                     value="{{ values.repository_url }}" 
                     required>
            </div>

            <div class="govuk-form-group">
              <label class="govuk-label" for="custom_prompt">
                Custom Prompt (optional)
              </label>
              <textarea class="govuk-textarea" 
                        id="custom_prompt" 
                        name="custom_prompt" 
                        rows="5">{{ values.custom_prompt }}</textarea>
            </div>

            <button type="submit" class="govuk-button" data-module="govuk-button">
              Add Standard Set
            </button>

            <a href="/standards/standard-sets" class="govuk-button govuk-button--secondary">
              Cancel
            </a>
          </form>
        </div>
      </div>
    </main>
  </div>
{% endblock %}
